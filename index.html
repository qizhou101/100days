<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æˆ‘ä»¬çš„100å¤©çºªå¿µæ—…ç¨‹ (è°ƒè¯•ç‰ˆ) ğŸ› ï¸</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

    <style>
        /* --- å…¨å±€æ ·å¼ (ç™½è‰²ä¸»é¢˜) --- */
        body, html {
            margin: 0; padding: 0; overflow: hidden; 
            background-color: #ffffff; 
            color: #333333;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; height: 100%;
        }
        #container { width: 100%; height: 100%; position: relative; }
        .stage {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none;
        }

        /* --- å¯åŠ¨é¡µ --- */
        #start-screen {
            background: #ffffff; z-index: 999; opacity: 1; pointer-events: auto;
            color: #333;
        }
        #start-btn {
            padding: 15px 40px; border: 2px solid #ff4757; color: #ff4757; font-size: 1.2rem;
            cursor: pointer; border-radius: 50px; margin-top: 30px; letter-spacing: 2px;
            transition: 0.5s; text-transform: uppercase; background: transparent;
            font-weight: bold;
        }
        #start-btn:hover { background: #ff4757; color: white; box-shadow: 0 5px 20px rgba(255, 71, 87, 0.4); }

        /* --- Stage 1: å®æ—¶å€’è®¡æ—¶ --- */
        #stage-particles { background: #ffffff; }
        #particles-js { width: 100%; height: 100%; position: absolute; }
        
        #countdown-timer {
            position: absolute; color: #333;
            font-size: 4rem; font-weight: 300; z-index: 10;
            font-family: 'Courier New', Courier, monospace;
            text-shadow: none;
            letter-spacing: 5px;
        }
        .time-label { font-size: 1rem; color: #999; letter-spacing: 2px; margin-top: 10px; display: block; text-align: center;}
        
        #final-100-text { 
            position: absolute; color: #ff4757; font-size: 6rem; opacity: 0; z-index: 20;
            font-weight: bold;
        }

        /* --- Stage 2: èœ¡ç¬”å°æ–° --- */
        #shinchan-img { width: 60%; max-width: 300px; margin-bottom: 20px; }
        .dialogue-box {
            background: #fff; color: #333; padding: 15px 25px; border-radius: 20px;
            font-size: 1.1rem; position: relative; max-width: 80%; opacity: 0;
            border: 1px solid #eee;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .dialogue-box::after {
            content: ''; position: absolute; top: -10px; left: 50%;
            border-width: 0 10px 10px; border-style: solid; 
            border-color: #fff transparent; 
            display: block; width: 0;
            filter: drop-shadow(0 -2px 2px rgba(0,0,0,0.05));
        }

        /* --- Stage 3: èƒ¶å·å¿«é—ª --- */
        #film-roll-container { width: 100%; height: 100%; background: #fff; display: flex; align-items: center; justify-content: center; }
        .film-img { width: 100%; height: 100%; object-fit: contain; position: absolute; opacity: 0; }

        /* --- Stage 4: ç…§ç‰‡ç”»å»Š --- */
        .gallery-slide {
            position: absolute; width: 100%; height: 100%; display: flex; flex-direction: column;
            justify-content: center; align-items: center; opacity: 0;
        }
        .photo-group { display: flex; gap: 10px; margin-bottom: 30px; flex-wrap: wrap; justify-content: center; }
        .photo-group img { 
            height: 220px; width: auto; object-fit: cover; border-radius: 8px; 
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }
        .caption { 
            color: #444; font-size: 1.3rem; text-align: center; width: 85%; 
            font-weight: 400; letter-spacing: 1px; line-height: 1.6; text-shadow: none;
        }

        /* --- Stage 5: è§†é¢‘çˆ±å¿ƒå¢™ --- */
        #video-heart-grid {
            display: grid; grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(3, 1fr);
            gap: 5px; width: 95%; max-width: 600px; aspect-ratio: 4/3; position: relative;
        }
        .video-item { width: 100%; height: 100%; object-fit: cover; border-radius: 4px; opacity: 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .v-pos-1 { grid-area: 1 / 2 / 2 / 3; }
        .v-pos-2 { grid-area: 1 / 3 / 2 / 4; }
        .v-pos-3 { grid-area: 2 / 1 / 3 / 2; }
        .v-pos-4 { grid-area: 2 / 2 / 3 / 3; }
        .v-pos-5 { grid-area: 2 / 3 / 3 / 4; }
        .v-pos-6 { grid-area: 2 / 4 / 3 / 5; }
        .v-pos-7 { grid-area: 3 / 2 / 4 / 4; justify-self: center; width: 50%; }

        .heart-center-text {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: #ff4757;
            background: rgba(255,255,255,0.8);
            padding: 10px 20px; border-radius: 10px;
            font-size: 1.2rem; text-align: center; width: auto; min-width: 60%; z-index: 10;
            opacity: 0; font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        /* --- Stage 6: ç»“å°¾ --- */
        #final-message {
            color: #333; font-size: 1.6rem; line-height: 2; text-align: center; width: 80%; opacity: 0; letter-spacing: 2px; font-weight: 300;
        }
    </style>
</head>
<body>
    <audio id="bgm1" src="music1.mp3" preload="auto"></audio>
    <audio id="bgm2" src="music2.mp3" preload="auto" loop></audio>
    <audio id="shinchan-voice" src="shinchan.mp3" preload="auto"></audio>

    <div id="container">
        <div id="start-screen" class="stage" style="opacity: 1; pointer-events: auto;">
            <div style="font-size: 3rem; margin-bottom: 20px;">ğŸ¬</div>
            <h1>æ’ç»ƒæ¨¡å¼ï¼šç«‹å³å¼€å§‹</h1>
            <div id="start-btn">å¼€å§‹è°ƒè¯•</div>
        </div>

        <div id="stage-particles" class="stage">
            <div id="particles-js"></div>
            <div id="countdown-timer">
                00:00:00
                <span class="time-label">UNTIL THE MOMENT</span>
            </div>
            <div id="final-100-text">100 DAYS</div>
        </div>

        <div id="stage-shinchan" class="stage">
            <img id="shinchan-img" src="shinchan.png" alt="èœ¡ç¬”å°æ–°">
            <div class="dialogue-box">å’Œæˆ‘ä¸€èµ·ä½“éªŒè¿™æ¬¡é€†è½¬æ—¶é—´çš„æ—…ç¨‹å§ï¼</div>
        </div>

        <div id="stage-filmroll" class="stage">
            <div id="film-roll-container">
                <img class="film-img" src="p1_1.jpg">
                <img class="film-img" src="p2_1.jpg">
                <img class="film-img" src="p4_1.jpg">
                <img class="film-img" src="p6_1.jpg">
                <img class="film-img" src="p7_1.jpg">
            </div>
        </div>

        <div id="stage-gallery" class="stage">
            <div class="gallery-slide">
                <div class="photo-group"><img src="p1_1.jpg"><img src="p1_2.jpg"><img src="p1_3.jpg"></div>
                <div class="caption">è¿™æ˜¯è°å®¶çš„ç¾å¥³å•Šï¼ŒåŸæ¥æ˜¯æˆ‘å®¶çš„å•Šï¼</div>
            </div>
             <div class="gallery-slide">
                <div class="photo-group"><img src="p2_1.jpg"><img src="p2_2.jpg"></div>
                <div class="caption">æœ‰ç†Šé™ªä¼´çš„äººå°±æ˜¯ä¼šå¾ˆå¹¸ç¦å‘¢</div>
            </div>
            <div class="gallery-slide">
                <div class="photo-group"><img src="p3_1.jpg"></div>
                <div class="caption">ç™¾åƒä¸åŒçš„å·´æ–¯å…‹</div>
            </div>
            <div class="gallery-slide">
                <div class="photo-group"><img src="p4_1.jpg"><img src="p4_2.jpg"><img src="p4_3.jpg"></div>
                <div class="caption">å‡ºå‘ï¼é¦–æ¸¸é½é²</div>
            </div>
            <div class="gallery-slide">
                <div class="photo-group"><img src="p5_1.jpg"></div>
                <div class="caption">å“¼ï¼Œä¸‰æ¬¡å”‰ï¼Œæˆ‘å°±è¿™ä¸€å¼ ç…§ç‰‡ï¼Œä½†ä¹Ÿçæƒœçš„ä¸å¾—äº†å‘¢</div>
            </div>
            <div class="gallery-slide">
                <div class="photo-group"><img src="p6_1.jpg"><img src="p6_2.jpg"></div>
                <div class="caption">è™½ç„¶è·ç¦»å¾ˆè¿œï¼Œä½†dimoä¼šä»£æ›¿æˆ‘ä¸€ç›´é™ªåœ¨ä½ çš„èº«è¾¹</div>
            </div>
            <div class="gallery-slide">
                <div class="photo-group"><img src="p7_1.jpg"></div>
                <div class="caption">åˆä»£å°è›‹ç³•æ¥äº†</div>
            </div>
        </div>

        <div id="stage-videoheart" class="stage">
            <div id="video-heart-grid">
                <video class="video-item v-pos-1" src="v1.mp4" muted playsinline></video>
                <video class="video-item v-pos-2" src="v2.mp4" muted playsinline></video>
                <video class="video-item v-pos-3" src="v3.mp4" muted playsinline></video>
                <video class="video-item v-pos-4" src="v4.mp4" muted playsinline></video>
                <video class="video-item v-pos-5" src="v5.mp4" muted playsinline></video>
                <video class="video-item v-pos-6" src="v6.mp4" muted playsinline></video>
                <video class="video-item v-pos-7" src="v7.mp4" muted playsinline></video>
                <div class="heart-center-text">ä½ çš„è¿‡å»æˆ‘æ¥ä¸åŠï¼Œ<br>ä½ çš„æœªæ¥æˆ‘ä»¬ä¸€è¨€ä¸ºå®šâ¤ï¸</div>
            </div>
        </div>

        <div id="stage-finale" class="stage">
            <div id="final-message">è®©æˆ‘ä»¬ä¸€èµ·ç›¸çº¦ï¼Œ<br>åœ¨æœªçŸ¥çš„ä»¥åï¼Œ<br>èº«è¾¹ï¼Œè¿˜æ˜¯å½¼æ­¤ã€‚</div>
        </div>
    </div>


    <script>
        gsap.registerPlugin(TextPlugin);
        const bgm1 = document.getElementById('bgm1');
        const bgm2 = document.getElementById('bgm2');
        const shinchanVoice = document.getElementById('shinchan-voice');

        // ================= é…ç½®åŒºåŸŸ =================
        // ã€é‡è¦ï¼šæ­£å¼å‘ç»™å¥¹å‰æ”¹å›è¿™ä¸ªã€‘ const TARGET_DATE = new Date("2025-12-25T17:21:00").getTime();
        
        // ã€è°ƒè¯•ç”¨ã€‘ è®¾ç½®ç›®æ ‡æ—¶é—´ä¸ºå½“å‰æ—¶é—´çš„ 1 ç§’å‰ï¼Œè¿™æ ·å€’è®¡æ—¶ä¼šç«‹å³ç»“æŸ
        const TARGET_DATE = new Date().getTime() - 1000;
        // ===========================================

        particlesJS("particles-js", {
            "particles": {
                "number": { "value": 80 },
                "color": { "value": ["#ff6b81", "#70a1ff", "#2ed573", "#a29bfe"] },
                "shape": { "type": "circle" },
                "opacity": { "value": 0.7, "random": true },
                "size": { "value": 5, "random": true },
                "move": { "enable": true, "speed": 3, "direction": "none", "random": true, "out_mode": "out" },
                "line_linked": { "enable": false }
            },
            "interactivity": { "events": { "onclick": { "enable": false } } }
        });

        let timerInterval;
        const mainTimeline = gsap.timeline({ paused: true });

        function updateTimer() {
            const now = new Date().getTime();
            const distance = TARGET_DATE - now;

            if (distance < 0) {
                // æ—¶é—´åˆ°ï¼Œç«‹å³æ‰§è¡Œä¸»æµç¨‹
                clearInterval(timerInterval);
                document.getElementById("countdown-timer").innerHTML = "00:00:00";
                startMainShow();
                return;
            }

            // å¦‚æœè¿˜éœ€è¦å€’è®¡æ—¶ï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºï¼ˆè°ƒè¯•æ¨¡å¼ä¸‹ä½ çœ‹ä¸åˆ°è¿™ä¸ªï¼‰
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            const hStr = hours < 10 ? "0" + hours : hours;
            const mStr = minutes < 10 ? "0" + minutes : minutes;
            const sStr = seconds < 10 ? "0" + seconds : seconds;
            document.getElementById("countdown-timer").innerHTML = `${hStr}:${mStr}:${sStr} <span class="time-label">UNTIL THE MOMENT</span>`;
        }

        document.getElementById('start-btn').addEventListener('click', () => {
            gsap.to('#start-screen', { opacity: 0, duration: 0.8, onComplete: () => {
                document.getElementById('start-screen').style.display = 'none';
                gsap.to('#stage-particles', { opacity: 1, duration: 1 });
                bgm1.play();
                updateTimer();
                timerInterval = setInterval(updateTimer, 1000);
            }});
        });

        function startMainShow() {
            const tl = gsap.timeline();
            tl.to('#countdown-timer', { opacity: 0, scale: 2, duration: 0.5, ease: "power2.in" })
              .call(() => {
                  if(window.pJSDom && window.pJSDom[0]) {
                      window.pJSDom[0].pJS.particles.move.speed = 40;
                  }
              })
              .to('#final-100-text', { opacity: 1, scale: 1.2, duration: 2, ease: "elastic.out(1, 0.3)" }, "+=0.2")
              .to('#stage-particles', { opacity: 0, duration: 1.5 }, "+=3")
              .add(playShinchanSequence());
        }

        function playShinchanSequence() {
            const tl = gsap.timeline();
            
            // èœ¡ç¬”å°æ–°
            tl.set('#stage-shinchan', { opacity: 1 })
              .from('#shinchan-img', { y: 200, opacity: 0, duration: 1.2, ease: "back.out(1.7)" })
              .to('.dialogue-box', { opacity: 1, scale: 1, duration: 0.5 }, "+=0.2")
              .call(() => shinchanVoice.play())
              .to('#stage-shinchan', { opacity: 0, duration: 0.8 }, "+=3.5");

            // èƒ¶å·å¿«é—ª
            tl.set('#stage-filmroll', { opacity: 1 })
            document.querySelectorAll('.film-img').forEach(img => {
                tl.to(img, { opacity: 1, duration: 0.1 }).to(img, { opacity: 0, duration: 0.1 }, "+=0.1");
            });
            tl.set('#stage-filmroll', { opacity: 0 });

            // ç…§ç‰‡ç”»å»Š
            tl.set('#stage-gallery', { opacity: 1, pointerEvents: 'auto' });
            
            const slides = document.querySelectorAll('.gallery-slide');
            slides.forEach((slide, index) => {
                let caption = slide.querySelector('.caption');
                let text = caption.innerText;
                caption.innerText = "";

                let slideTL = gsap.timeline();
                slideTL.to(slide, { opacity: 1, duration: 4, ease: "power1.inOut" }) 
                       .to(caption, { text: text, duration: 3, ease: "none" }, "-=2")
                       .to(slide, { opacity: 0, duration: 2 }, "+=3");

                tl.add(slideTL);
            });

            // è§†é¢‘çˆ±å¿ƒå¢™
            tl.call(() => {
                bgm1.pause();
                bgm2.play();
                document.querySelectorAll('.video-item').forEach(v => v.play());
            })
            .set('#stage-gallery', { opacity: 0 })
            .set('#stage-videoheart', { opacity: 1 })
            .to('.video-item', { opacity: 1, duration: 2, stagger: 0.3 })
            .to('.heart-center-text', { opacity: 1, duration: 3, ease: "power2.out" }, "+=1")
            .to('#stage-videoheart', { opacity: 0, duration: 3 }, "+=6");

            // ç»“å°¾
            tl.set('#stage-finale', { opacity: 1 })
              .from('#final-message', { y: 30, opacity: 0, duration: 4, ease: "power2.out" });

            return tl;
        }
    </script>
</body>
</html>