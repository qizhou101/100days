<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æˆ‘ä»¬çš„100å¤©çºªå¿µæ—…ç¨‹ â¤ï¸</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>

    <style>
        /* --- å…¨å±€æ ·å¼ --- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html {
            margin: 0; padding: 0; overflow: hidden; 
            background-color: #ffffff; 
            font-family: 'PingFang SC', -apple-system, sans-serif;
            height: 100%; width: 100%; position: fixed;
        }
        #container { width: 100%; height: 100%; position: relative; }
        .stage {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; 
            justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; padding: 10px;
        }

        /* --- å¯åŠ¨é¡µ --- */
        #start-screen { background: #ffffff; z-index: 999; opacity: 1; pointer-events: auto; }
        #start-btn {
            padding: 12px 35px; border: 2px solid #ff4757; color: #ff4757; font-size: 1.1rem;
            cursor: pointer; border-radius: 50px; margin-top: 30px; letter-spacing: 1px;
            background: transparent; font-weight: bold;
        }

        /* --- Stage 1: å€’è®¡æ—¶ --- */
        #stage-particles { background: #ffffff; }
        #countdown-timer { 
            position: absolute; color: #333; 
            /* å­—ä½“å¤§å°é€‚é…ï¼šç¡®ä¿æ—¶åˆ†ç§’èƒ½æ”¾å¾—ä¸‹ */
            font-size: 11vw; 
            font-weight: 300; font-family: 'Courier New', monospace; letter-spacing: -2px;
        }
        .time-label { 
            font-size: 1rem; color: #999; letter-spacing: 2px; margin-top: 15px; 
            display: block; text-align: center; font-family: sans-serif;
        }
        #final-100-text { position: absolute; color: #ff4757; font-size: 15vw; opacity: 0; font-weight: bold; }

        /* --- Stage 2: èœ¡ç¬”å°æ–° --- */
        #shinchan-img { width: 65%; max-width: 280px; margin-bottom: 3vh; }
        .dialogue-box {
            background: #fff; color: #333; padding: 12px 18px; border-radius: 15px;
            font-size: 1rem; position: relative; max-width: 85%; opacity: 0;
            border: 1px solid #eee; box-shadow: 0 5px 20px rgba(0,0,0,0.08);
        }
        .dialogue-box::after {
            content: ''; position: absolute; top: -10px; left: 50%; transform: translateX(-50%);
            border-width: 0 10px 10px; border-style: solid; border-color: #fff transparent; display: block;
        }

        /* --- Stage 3: èƒ¶å·å¿«é—ª --- */
        #film-roll-container { width: 100%; height: 100%; background: #fff; display: flex; align-items: center; justify-content: center; }
        .film-img { width: auto; height: auto; max-width: 95%; max-height: 80%; object-fit: contain; position: absolute; opacity: 0; }

        /* --- Stage 4: ç…§ç‰‡ç”»å»Š --- */
        .gallery-slide {
            position: absolute; width: 100%; height: 100%; 
            display: flex; flex-direction: column;
            justify-content: space-between; align-items: center; opacity: 0;
            padding: 30px 0 50px 0;
        }
        .photo-group-container {
            flex: 1; width: 100%; display: flex; justify-content: center; align-items: center;
            overflow: hidden; margin-bottom: 20px;
        }
        .photo-group { display: flex; flex-wrap: wrap; justify-content: center; align-items: center; gap: 8px; width: 100%; }
        .photo-group img { 
            width: auto; height: auto; max-width: 90%; max-height: 55vh; 
            object-fit: contain; border-radius: 8px; 
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        .photo-group.multi-photos img { max-height: 35vh; max-width: 46%; }

        .caption { 
            font-size: 1.1rem; text-align: center; width: 92%; 
            font-weight: bold; letter-spacing: 1px; line-height: 1.4; 
            transition: color 0.5s;
            padding: 10px; background: rgba(255,255,255,0.95); border-radius: 10px;
        }

        /* --- Stage 5: è§†é¢‘çˆ±å¿ƒå¢™ --- */
        #video-heart-grid {
            display: grid; 
            grid-template-columns: repeat(4, 1fr); 
            grid-template-rows: repeat(3, 1fr);
            gap: 4px; width: 85vw; max-width: 340px; aspect-ratio: 4/3; position: relative;
        }
        .video-item { 
            width: 100%; height: 100%; object-fit: cover; border-radius: 4px; opacity: 0; display: block; background: #000;
        }
        .v-pos-1 { grid-area: 1 / 2 / 2 / 3; }
        .v-pos-2 { grid-area: 1 / 3 / 2 / 4; }
        .v-pos-3 { grid-area: 2 / 1 / 3 / 2; }
        .v-pos-4 { grid-area: 2 / 2 / 3 / 3; }
        .v-pos-5 { grid-area: 2 / 3 / 3 / 4; }
        .v-pos-6 { grid-area: 2 / 4 / 3 / 5; }
        .v-pos-7 { grid-area: 3 / 2 / 4 / 4; justify-self: center; width: 100%; }

        .heart-center-text {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: #ff4757; background: rgba(255,255,255,0.95);
            padding: 12px 10px; border-radius: 8px; font-size: 0.9rem; text-align: center; width: 90%; z-index: 10;
            opacity: 0; font-weight: bold; box-shadow: 0 5px 15px rgba(0,0,0,0.15); pointer-events: none;
        }

        /* --- Stage 6: ç»“å°¾ --- */
        #final-message {
            color: #333; font-size: 1.3rem; line-height: 2; text-align: center; width: 85%; opacity: 0; letter-spacing: 2px; font-weight: 300;
        }
    </style>
</head>
<body>
    <audio id="bgm1" src="music1.mp3" preload="auto"></audio>
    <audio id="bgm2" src="music2.mp3" preload="auto" loop></audio>
    <audio id="shinchan-voice" src="shinchan.mp3" preload="auto"></audio>

    <div id="container">
        <div id="start-screen" class="stage" style="opacity: 1; pointer-events: auto;">
            <div style="font-size: 3rem; margin-bottom: 20px;">ğŸ’Œ</div>
            <h1>Our 100 Days</h1>
            <div id="start-btn">å¼€å¯æ—…ç¨‹</div>
        </div>

        <div id="stage-particles" class="stage">
            <div id="particles-js"></div>
            <div id="countdown-timer">
                00:00:00
                <span class="time-label">UNTIL THE MOMENT</span>
            </div>
            <div id="final-100-text">100 DAYS</div>
        </div>

        <div id="stage-shinchan" class="stage">
            <img id="shinchan-img" src="shinchan.png" alt="å°æ–°å›¾ç‰‡">
            <div class="dialogue-box">å’Œæˆ‘ä¸€èµ·ä½“éªŒè¿™æ¬¡é€†è½¬æ—¶é—´çš„æ—…ç¨‹å§ï¼</div>
        </div>

        <div id="stage-filmroll" class="stage">
            <div id="film-roll-container">
                <img class="film-img" src="p1_1.jpg">
                <img class="film-img" src="p2_1.jpg">
                <img class="film-img" src="p4_1.jpg">
                <img class="film-img" src="p6_1.jpg">
                <img class="film-img" src="p7_1.jpg">
            </div>
        </div>

        <div id="stage-gallery" class="stage">
            <div class="gallery-slide">
                <div class="photo-group-container">
                    <div class="photo-group multi-photos">
                        <img src="p1_1.jpg"><img src="p1_2.jpg"><img src="p1_3.jpg">
                    </div>
                </div>
                <div class="caption">è¿™æ˜¯è°å®¶çš„ç¾å¥³å•Šï¼ŒåŸæ¥æ˜¯æˆ‘å®¶çš„å•Šï¼</div>
            </div>
             <div class="gallery-slide">
                <div class="photo-group-container">
                    <div class="photo-group multi-photos">
                        <img src="p2_1.jpg"><img src="p2_2.jpg">
                    </div>
                </div>
                <div class="caption">æœ‰ç†Šé™ªä¼´çš„äººå°±æ˜¯ä¼šå¾ˆå¹¸ç¦å‘¢</div>
            </div>
            <div class="gallery-slide">
                <div class="photo-group-container">
                    <div class="photo-group">
                        <img src="p3_1.jpg">
                    </div>
                </div>
                <div class="caption">ç™¾åƒä¸åŒçš„å·´æ–¯å…‹</div>
            </div>
            <div class="gallery-slide">
                <div class="photo-group-container">
                    <div class="photo-group multi-photos">
                        <img src="p4_1.jpg"><img src="p4_2.jpg"><img src="p4_3.jpg">
                    </div>
                </div>
                <div class="caption">å‡ºå‘ï¼é¦–æ¸¸é½é²</div>
            </div>
            <div class="gallery-slide">
                <div class="photo-group-container">
                    <div class="photo-group">
                        <img src="p5_1.jpg">
                    </div>
                </div>
                <div class="caption">å“¼ï¼Œå¾ˆå¤šæ¬¡å”‰ï¼Œæˆ‘å°±è¿™ä¸€å¼ ç…§ç‰‡ï¼Œä½†ä¹Ÿçæƒœçš„ä¸å¾—äº†å‘¢</div>
            </div>
            <div class="gallery-slide">
                <div class="photo-group-container">
                    <div class="photo-group multi-photos">
                        <img src="p6_1.jpg"><img src="p6_2.jpg">
                    </div>
                </div>
                <div class="caption">è™½ç„¶è·ç¦»å¾ˆè¿œï¼Œä½†dimoä¼šä»£æ›¿æˆ‘ä¸€ç›´é™ªåœ¨ä½ çš„èº«è¾¹</div>
            </div>
            <div class="gallery-slide">
                <div class="photo-group-container">
                    <div class="photo-group">
                        <img src="p7_1.jpg">
                    </div>
                </div>
                <div class="caption">åˆä»£å°è›‹ç³•æ¥äº†</div>
            </div>
        </div>

        <div id="stage-videoheart" class="stage">
            <div id="video-heart-grid">
                <video class="video-item v-pos-1" src="v1.mp4" muted playsinline webkit-playsinline loop></video>
                <video class="video-item v-pos-2" src="v2.mp4" muted playsinline webkit-playsinline loop></video>
                <video class="video-item v-pos-3" src="v3.mp4" muted playsinline webkit-playsinline loop></video>
                <video class="video-item v-pos-4" src="v4.mp4" muted playsinline webkit-playsinline loop></video>
                <video class="video-item v-pos-5" src="v5.mp4" muted playsinline webkit-playsinline loop></video>
                <video class="video-item v-pos-6" src="v6.mp4" muted playsinline webkit-playsinline loop></video>
                <video class="video-item v-pos-7" src="v7.mp4" muted playsinline webkit-playsinline loop></video>
                <div class="heart-center-text">ä½ çš„è¿‡å»æˆ‘æ¥ä¸åŠï¼Œ<br>ä½ çš„æœªæ¥æˆ‘ä»¬ä¸€è¨€ä¸ºå®šâ¤ï¸</div>
            </div>
        </div>

        <div id="stage-finale" class="stage">
            <div id="final-message">è®©æˆ‘ä»¬ä¸€èµ·ç›¸çº¦ï¼Œ<br>åœ¨æœªçŸ¥çš„ä»¥åï¼Œ<br>èº«è¾¹ï¼Œè¿˜æ˜¯å½¼æ­¤ã€‚</div>
        </div>
    </div>

    <script>
        gsap.registerPlugin(TextPlugin);
        const bgm1 = document.getElementById('bgm1');
        const bgm2 = document.getElementById('bgm2');
        const shinchanVoice = document.getElementById('shinchan-voice');
        const videos = document.querySelectorAll('.video-item');

        function getRandomColor() {
            const colors = ['#ff4757', '#2ed573', '#1e90ff', '#ffa502', '#8e44ad', '#e84393', '#00b894'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // ==============================================
        // ğŸš¨ æ ¸å¿ƒä¿®æ”¹ï¼šæ­£å¼æ—¶é—´è®¾å®š
        // è®¾å®šä¸ºï¼š2025å¹´ 12æœˆ 25æ—¥ 17ç‚¹ 21åˆ† 00ç§’
        const TARGET_DATE = new Date("2025-12-25T17:21:00").getTime();
        // ==============================================

        particlesJS("particles-js", {
            "particles": {
                "number": { "value": 50 },
                "color": { "value": ["#ff6b81", "#70a1ff", "#2ed573"] },
                "shape": { "type": "circle" },
                "opacity": { "value": 0.7, "random": true },
                "size": { "value": 3, "random": true },
                "move": { "enable": true, "speed": 3, "direction": "none", "random": true, "out_mode": "out" },
                "line_linked": { "enable": false }
            },
            "interactivity": { "events": { "onclick": { "enable": false } } }
        });

        let timerInterval;
        const mainTimeline = gsap.timeline({ paused: true });

        function updateTimer() {
            const now = new Date().getTime();
            const distance = TARGET_DATE - now;

            if (distance < 0) {
                // æ—¶é—´åˆ°äº†ï¼
                clearInterval(timerInterval);
                document.getElementById("countdown-timer").innerHTML = ""; // æ¸…ç©ºå€’è®¡æ—¶
                startMainShow();
                return;
            }

            // è®¡ç®—æ—¶é—´
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            // è¡¥é›¶
            const hStr = hours < 10 ? "0" + hours : hours;
            const mStr = minutes < 10 ? "0" + minutes : minutes;
            const sStr = seconds < 10 ? "0" + seconds : seconds;

            // æ˜¾ç¤ºå€’è®¡æ—¶
            document.getElementById("countdown-timer").innerHTML = `
                ${hStr}:${mStr}:${sStr}
                <span class="time-label">UNTIL 100 DAYS</span>
            `;
        }

        document.getElementById('start-btn').addEventListener('click', () => {
            // é¢„åŠ è½½æ‰€æœ‰éŸ³é¢‘/è§†é¢‘
            bgm1.play().catch(()=>{}); bgm1.pause();
            bgm2.play().catch(()=>{}); bgm2.pause();
            shinchanVoice.play().catch(()=>{}); shinchanVoice.pause();
            videos.forEach(v => { v.play().catch(()=>{}); v.pause(); });

            gsap.to('#start-screen', { opacity: 0, duration: 0.8, onComplete: () => {
                document.getElementById('start-screen').style.display = 'none';
                gsap.to('#stage-particles', { opacity: 1, duration: 1 });
                bgm1.play();
                updateTimer(); // ç«‹å³æ‰§è¡Œä¸€æ¬¡
                timerInterval = setInterval(updateTimer, 1000); // å¼€å¯å€’è®¡æ—¶
            }});
        });

        function startMainShow() {
            const tl = gsap.timeline();
            
            // å€’è®¡æ—¶ç»“æŸï¼Œ100 DAYS å‡ºç°
            tl.to('#countdown-timer', { opacity: 0, duration: 0.5 })
              .call(() => { if(window.pJSDom && window.pJSDom[0]) window.pJSDom[0].pJS.particles.move.speed = 40; })
              .to('#final-100-text', { opacity: 1, scale: 1.1, duration: 1.5, ease: "elastic.out(1, 0.3)" }, "+=0.1")
              .to('#stage-particles', { opacity: 0, duration: 1 }, "+=1") 
              .add(playShinchanSequence());
        }

        function playShinchanSequence() {
            const tl = gsap.timeline();
            
            // å°æ–°
            tl.set('#stage-shinchan', { opacity: 1 })
              .from('#shinchan-img', { y: 200, opacity: 0, duration: 1, ease: "back.out(1.7)" })
              .to('.dialogue-box', { opacity: 1, scale: 1, duration: 0.5 }, "+=0.2")
              .call(() => shinchanVoice.play())
              .to('#stage-shinchan', { opacity: 0, duration: 0.8 }, "+=3.5");

            // å¿«é—ª
            tl.set('#stage-filmroll', { opacity: 1 })
            document.querySelectorAll('.film-img').forEach(img => {
                tl.to(img, { opacity: 1, duration: 0.1 }).to(img, { opacity: 0, duration: 0.1 }, "+=0.1");
            });
            tl.set('#stage-filmroll', { opacity: 0 });

            // ç”»å»Š
            tl.set('#stage-gallery', { opacity: 1, pointerEvents: 'auto' });
            const slides = document.querySelectorAll('.gallery-slide');
            slides.forEach((slide, index) => {
                let caption = slide.querySelector('.caption');
                let text = caption.innerText;
                caption.innerText = "";
                caption.style.color = getRandomColor();

                let slideTL = gsap.timeline();
                slideTL.to(slide, { opacity: 1, duration: 3, ease: "power1.inOut" }) 
                       .to(caption, { text: text, duration: 2.5, ease: "none" }, "-=1.5")
                       .to(slide, { opacity: 0, duration: 1.5 }, "+=3");
                tl.add(slideTL);
            });

            // è§†é¢‘å¢™
            tl.call(() => {
                bgm1.pause(); bgm2.play();
                videos.forEach(v => { v.currentTime = 0; v.play(); });
            })
            .set('#stage-gallery', { opacity: 0 })
            .set('#stage-videoheart', { opacity: 1 })
            .to('.video-item', { opacity: 1, duration: 1.5, stagger: 0.2 })
            .to('.heart-center-text', { opacity: 1, duration: 2, ease: "power2.out" }, "+=0.5")
            .to('#stage-videoheart', { opacity: 0, duration: 2 }, "+=6");

            // ç»“å°¾
            tl.set('#stage-finale', { opacity: 1 })
              .from('#final-message', { y: 30, opacity: 0, duration: 3, ease: "power2.out" });

            return tl;
        }
    </script>
</body>
</html>